# ğŸ“‹ Redisåˆ é™¤æµæ°´å¤„ç†å™¨ - å¢å¼ºæ—¥å¿—åŠŸèƒ½

## æ¦‚è¿°
å·²ä¸ºRedisåˆ é™¤æµæ°´å¤„ç†å™¨ï¼ˆ`handlers/redis_del.go`ï¼‰æ·»åŠ äº†å®Œæ•´çš„ä¼ä¸šçº§æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå®ç°äº†æ¯ä¸ªå¤„ç†æ­¥éª¤çš„è¯¦ç»†æ—¥å¿—è¿½è¸ªå’Œæ€§èƒ½ç›‘æ§ã€‚

## ğŸ” æ—¥å¿—è®°å½•è¯¦æƒ…

### æµç¨‹å¼€å§‹æ—¥å¿—
```json
{
  "level": "INFO",
  "msg": "å¼€å§‹Redisåˆ é™¤æ“ä½œæµç¨‹",
  "user_id": 12345,
  "chat_id": 12345,
  "input_file": ".../input.xlsx",
  "timestamp": "2025-09-25T16:10:30+08:00"
}
```

### æ­¥éª¤1ï¼šç”ŸæˆRedisåˆ é™¤å‘½ä»¤
**å¼€å§‹æ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "å¼€å§‹æ­¥éª¤1ï¼šç”ŸæˆRedisåˆ é™¤å‘½ä»¤",
  "user_id": 12345,
  "input_file": ".../input.xlsx",
  "timestamp": "2025-09-25T16:10:31+08:00"
}
```

**å®Œæˆæ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "æ­¥éª¤1å®Œæˆï¼šç”ŸæˆRedisåˆ é™¤å‘½ä»¤",
  "user_id": 12345,
  "total_users": 500,
  "total_commands": 1000,
  "duration": "1.234s",
  "output_file": ".../redis_delete_commands.txt"
}
```

**æ€§èƒ½æŒ‡æ ‡ï¼š**
```json
{
  "level": "INFO",
  "msg": "æ€§èƒ½æŒ‡æ ‡",
  "operation": "redis_generate_commands",
  "duration": "1.234s",
  "item_count": 500,
  "user_id": 12345,
  "items_per_second": 405.20
}
```

### æ­¥éª¤2ï¼šåˆ›å»ºå·¥ä½œç›®å½•å¹¶ç§»åŠ¨æ–‡ä»¶
**å¼€å§‹æ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "å¼€å§‹æ­¥éª¤2ï¼šåˆ›å»ºå·¥ä½œç›®å½•å¹¶ç§»åŠ¨æ–‡ä»¶",
  "user_id": 12345,
  "timestamp": "2025-09-25T16:10:32+08:00"
}
```

**å®Œæˆæ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "æ­¥éª¤2å®Œæˆï¼šå·¥ä½œç›®å½•åˆ›å»ºå’Œæ–‡ä»¶ç§»åŠ¨",
  "user_id": 12345,
  "multi_redis_dir": ".../multi-redis",
  "redis_file": ".../redis_commands.txt",
  "duration": "0.245s"
}
```

### æ­¥éª¤3ï¼šåˆ†å‰²Rediså‘½ä»¤æ–‡ä»¶
**å¼€å§‹æ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "å¼€å§‹æ­¥éª¤3ï¼šåˆ†å‰²Rediså‘½ä»¤æ–‡ä»¶",
  "user_id": 12345,
  "source_file": ".../redis_commands.txt",
  "timestamp": "2025-09-25T16:10:33+08:00"
}
```

**å®Œæˆæ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "æ­¥éª¤3å®Œæˆï¼šæ–‡ä»¶åˆ†å‰²",
  "user_id": 12345,
  "split_dir": ".../multi-redis-split",
  "duration": "0.876s"
}
```

### æ­¥éª¤4ï¼šåˆ›å»ºæ‰§è¡Œè„šæœ¬
**å¼€å§‹æ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "å¼€å§‹æ­¥éª¤4ï¼šåˆ›å»ºRedisæ‰§è¡Œè„šæœ¬",
  "user_id": 12345,
  "split_dir": ".../multi-redis-split",
  "timestamp": "2025-09-25T16:10:34+08:00"
}
```

**å®Œæˆæ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "æ­¥éª¤4å®Œæˆï¼šæ‰§è¡Œè„šæœ¬åˆ›å»º",
  "user_id": 12345,
  "script_path": ".../execute_redis_commands.sh",
  "duration": "0.123s"
}
```

### æ­¥éª¤5ï¼šå‹ç¼©æ–‡ä»¶åŒ…
**å¼€å§‹æ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "å¼€å§‹æ­¥éª¤5ï¼šå‹ç¼©æ–‡ä»¶åŒ…",
  "user_id": 12345,
  "split_dir": ".../multi-redis-split",
  "timestamp": "2025-09-25T16:10:35+08:00"
}
```

**å®Œæˆæ—¥å¿—ï¼š**
```json
{
  "level": "INFO",
  "msg": "æ­¥éª¤5å®Œæˆï¼šæ–‡ä»¶å‹ç¼©",
  "user_id": 12345,
  "zip_file": ".../redis-delete-commands.zip",
  "duration": "2.345s"
}
```

### æµç¨‹å®Œæˆæ—¥å¿—
**æ€§èƒ½æ€»ç»“ï¼š**
```json
{
  "level": "INFO",
  "msg": "æ€§èƒ½æŒ‡æ ‡",
  "operation": "redis_delete_pipeline",
  "duration": "5.823s",
  "item_count": 500,
  "user_id": 12345,
  "items_per_second": 85.86
}
```

**å®Œæˆæ‘˜è¦ï¼š**
```json
{
  "level": "INFO",
  "msg": "Redisåˆ é™¤æ“ä½œæµç¨‹å®Œæˆ",
  "user_id": 12345,
  "chat_id": 12345,
  "total_users": 500,
  "total_commands": 1000,
  "zip_file": ".../redis-delete-commands.zip",
  "duration": "5.823s",
  "timestamp": "2025-09-25T16:10:36+08:00"
}
```

## ğŸš¨ é”™è¯¯å¤„ç†æ—¥å¿—ç¤ºä¾‹

### æ–‡ä»¶æ ¼å¼é”™è¯¯
```json
{
  "level": "WARN",
  "msg": "ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼",
  "user_id": 12345,
  "input_file": ".../input.txt"
}
```

### æ­¥éª¤æ‰§è¡Œé”™è¯¯
```json
{
  "level": "ERROR",
  "msg": "æ“ä½œé”™è¯¯",
  "user_id": 12345,
  "operation": "create_multi_redis_dir",
  "error": "permission denied: /tmp/user_12345/multi-redis",
  "target_dir": ".../multi-redis",
  "timestamp": "2025-09-25T16:10:32+08:00"
}
```

## ğŸ“Š æ—¥å¿—åˆ†æä»·å€¼

### 1. æ€§èƒ½ç›‘æ§
- **æ­¥éª¤çº§æ€§èƒ½è¿½è¸ª**ï¼šæ¯ä¸ªæ­¥éª¤çš„æ‰§è¡Œæ—¶é—´
- **ååé‡ç»Ÿè®¡**ï¼šå¤„ç†é€Ÿåº¦å’Œæ•ˆç‡æŒ‡æ ‡
- **ç“¶é¢ˆè¯†åˆ«**ï¼šæ‰¾å‡ºæœ€è€—æ—¶çš„å¤„ç†æ­¥éª¤

### 2. é—®é¢˜æ’æŸ¥
- **è¯¦ç»†é”™è¯¯ä¿¡æ¯**ï¼šåŒ…å«ä¸Šä¸‹æ–‡çš„é”™è¯¯æ—¥å¿—
- **æ­¥éª¤è¿½è¸ª**ï¼šç²¾ç¡®å®šä½å¤±è´¥ç‚¹
- **æ–‡ä»¶è·¯å¾„è®°å½•**ï¼šä¾¿äºå®šä½é—®é¢˜æ–‡ä»¶

### 3. ç”¨æˆ·è¡Œä¸ºåˆ†æ
- **ä½¿ç”¨ç»Ÿè®¡**ï¼šRedisåˆ é™¤åŠŸèƒ½çš„ä½¿ç”¨é¢‘ç‡
- **æ•°æ®é‡åˆ†æ**ï¼šå¤„ç†çš„ç”¨æˆ·æ•°å’Œå‘½ä»¤æ•°ç»Ÿè®¡
- **æˆåŠŸç‡ç›‘æ§**ï¼šæ“ä½œæˆåŠŸ/å¤±è´¥æ¯”ä¾‹

### 4. è¿ç»´ç›‘æ§
- **èµ„æºä½¿ç”¨**ï¼šæ–‡ä»¶æ“ä½œå’Œç£ç›˜ä½¿ç”¨æƒ…å†µ
- **ç³»ç»Ÿè´Ÿè½½**ï¼šå¤„ç†æ—¶é—´å’Œå¹¶å‘æƒ…å†µ
- **å‘Šè­¦æ”¯æŒ**ï¼šåŸºäºæ—¥å¿—çš„ç›‘æ§å‘Šè­¦

## ğŸ¯ ä¸šåŠ¡ä»·å€¼

1. **æ“ä½œé€æ˜åº¦**ï¼šå®Œæ•´è®°å½•æ¯æ¬¡Redisåˆ é™¤æ“ä½œçš„è¯¦ç»†è¿‡ç¨‹
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šåŸºäºæ—¥å¿—æ•°æ®ä¼˜åŒ–å¤„ç†æµç¨‹
3. **æ•…éšœå¿«é€Ÿå®šä½**ï¼šç²¾ç¡®åˆ°æ­¥éª¤çº§åˆ«çš„é”™è¯¯è¿½è¸ª
4. **åˆè§„å®¡è®¡**ï¼šå®Œæ•´çš„æ“ä½œå®¡è®¡è½¨è¿¹
5. **ç”¨æˆ·ä½“éªŒæå‡**ï¼šå¿«é€Ÿå“åº”ç”¨æˆ·é—®é¢˜å’Œéœ€æ±‚

é€šè¿‡è¿™å¥—è¯¦ç»†çš„æ—¥å¿—ç³»ç»Ÿï¼ŒRedisåˆ é™¤æµæ°´å¤„ç†å™¨ç°åœ¨å…·å¤‡äº†ä¼ä¸šçº§åº”ç”¨çš„å¯è§‚æµ‹æ€§å’Œå¯ç»´æŠ¤æ€§ï¼